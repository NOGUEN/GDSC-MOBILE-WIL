# 새롭게 알게 된 내용들

## Stateless & Stateful

### Stateless

지금까지 이용한 위젯들은 모두 Statless Widget들로 상태가 없는 위젯이다.

상태가 없는 위젯은 표시할 상태자체가 없는 것이기 때문에 변화가 없다.

그러므로 정적이고 처음 보여준 그대로 멈춰있다.

쉽게 말하면 새로고침이 없는 위젯이다.

### Stateful

하지만 지금부터 새롭게 알게된 위젯인 Stateful은 다르다.

이름을 그대로 대추 해석하면 상태가 넘치는 위젯으로 그냥 상태가 있는 위젯이다.

상태가 있기에 변화할 것이 있다는 의미로도 해석할 수 있다.

그러므로 동적이고 처음 보여준 모습에서 많은 부분이 바뀔 수 있다.

쉽게 말하면 새로고침이 있는 위젯이다.

우리가 지금까지 사용한 유저 상호작용이 있는 앱들은 대부분 이런 Stateful 위젯으로 제작이 되었다고 해도 무방하다.

```dart
class HomePage extends StatefulWidget {
  const HomePage({super.key});

  @override
  State<HomePage> createState() => _HomePageState();
}

class _HomePageState extends State<HomePage> {
  CalendarFormat calenderFormat = CalendarFormat.month;
  DateTime selectedDate = DateTime.now();
  @override
  Widget build(BuildContext context) {
    return Container();
  }
}
```

위와 같이 이런 식으로 코드 템플릿이 제작되어있고, `setState`라는 함수가 있어서 이 함수에 매개변수로 람다 함수를 넣어줌으로서 상태를 변화시킨 것을 적용할 수 있다.

조금 길게 이야기했는데 조금 잘라서 이야기하면, 

`setState()` 함수의 역할은 위젯을 다시 그려주는 것

`setState(() {})` 의 매개변수는 위젯을 다시 그려주기 전에 수행할 명령어 집합 이라고 이해하면 쉽다.

## Provider

상태 관리 패키지로 Provider라는 것을 배웠다.

### 상태 관리란? 

Stateful 위젯을 사용하게 되면서 정보가 수정되면 위젯에서 신호를 보내 새로 화면을 그려주었는데, 여기서 문제가 하나 발생한다.

하나의 데이터 베이스를 사용할 때 여러 화면에서 하나의 데이터 베이스를 보여준다고 하면, 각각의 화면에서 데이터 베이스를 수정할 때 그 수정한 상태를 다른 화면에 전달을 해야한다는 문제가 발생한다.

코드가 안돌아가거나 처음부터 다시 짜야하는 엄청나게 치명적인 문제는 아니지만, 이는 코드의 구조를 굉장히 복잡하게 만들고 다른 사람이 코드를 볼 때 이해하기 어렵게 만든다.

그래서 하나의 데이터베이스를 관리하는 Provider라는 것을 두고 Provider가 상태를 모든 화면에 뿌려주는 방식으로 상태 관리를 하는 방법을 채택하게 된다.

이를 도와주는 것이 Provider 패키지고, 데이터베이스나 리스트를 등록하면 이 데이터가 CRUD로 변경될 때 그 상태를 각 화면에 뿌려준다.

### Provider Package

Provider 패키지는 pub.dev 에서 받을 수 있으니 해당 문서를 참고하여 사용하면 된다.

해당 패키지의 사용방법은 노근 블로그에 올릴 예정이다.


### 근데 CRUD가 뭐야?

CRUD는 데이터베이스에서 꼭 있어야 할 4가지 요소이다.

C : Create

R : Read

U : Update

D : Delete

이렇게 4가지 요소이고 생성, 읽기, 갱신, 삭제가 돼야한다는 것이다.

막상 보고 나면 별 거 아니고 한국으로 치면 갑자기 생읽갱삭이라고 그냥 앞 글자 따온거다.

근데 괜히 따온거는 아니고 당연한만큼 중요하니까 제대로 기억하라고 저렇게 써 놓은 거 같다.

## 상황에 맞는 화면 보여주기

Flutter에서의 코딩 방식을 보면 선언형으로 계속해서 매개변수에 위젯과 옵션을 넣는 방식으로 진행이 된다.

하지만 매개변수에 람다 함수가 들어가는게 아니면 이렇다 할 화면을 바꿔 보여주는 매커니즘을 적용하기가 힘들다.

처음 짤 때 부터 함수 형식으로 짜서 그 함수에서 돌려야하는데, 그런게 아니라면 상태에 따른 화면 보여주기는 조금 힘들다.

그런 상황에서 꽤 그럴듯한 해결 방법이 있는데 바로 삼항 연산자를 사용하는 것이다.

C와 C++, 그리고 다른 언어들에서도 흔히 볼 수 있는 바로 그 삼항 연산자를 말하는 것이 맞다.

(42서울에서는 엄격히 금지되어있어서 다른 언어에 없는줄 착각했다.)

```dart
조건식 ? 반환값1 : 반환값2;
```

이와 같은 형태로 사용한다.

그럼 이를 어떻게 위젯에 적용하냐면 아래의 예제와 같이 적용한다.

```dart
return isHomePage ? Container() : Text();
```

삼항연산자도 연산자니까 연산이 끝나면 값을 반환하는데, 그 값이 우리가 설정한 반환값1과 반환값2니까 참이면 Container, 거짓이면 Text가 반환된다.



꽤 쉽게 상태에 따른 화면을 보여주는 방법이 있나 생각을 해봤는데, 이 방법 말고는 애초에 짤 때 함수로 짜서 그 안에 로직을 넣는 방법 말고는 없는거 같다.

## 마치며

처음에는 Flutter가 선언형 UI 구성 패키지라서 진입장벽이 너무 낮아서 추가적으로 배울게 있나 싶었는데, 상태관리와 동기 비동기 쯤으로 들어오니 내용이 이제 알차고 조금 난이도가 있어진 느낌이다.

기존에 알던 지식들을 활용해서 빠르게 배워야겠다.
